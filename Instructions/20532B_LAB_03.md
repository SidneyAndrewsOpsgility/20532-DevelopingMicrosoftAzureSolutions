Module 3: Hosting Web Applications on the Azure Platform

Lab: Creating an ASP.NET Website by Using Azure Websites
--------------------------------------------------------

Scenario

You have an events administration application that is currently used by
a static set of users. The application must be upgraded to handle all
the users in your organization in the future. You need a hosting option
that provides the least amount of friction so that you can immediately
deploy the web application for immediate use. You also need the hosting
option to be flexible enough so that it allows you to configure and
scale the web application, thereby ensuring that it can handle an
increase in the number of administrative users. For these reasons, you
have chosen to deploy the application to Websites. Websites will also
give you the flexibility to integrate your application with Azure Active
Directory in the future so that all of your organization’s users can
access the application.

In this lab, you will create a Website, deploy your existing
application, and then configure the Website after deployment.

Objectives

After you complete this lab, you will be able to:

> Create a Website.
>
> Create a linked resource for a Website.
>
> Publish an ASP.NET web application to a Website.
>
> Modify the configuration of the Website in the Management Portal.

Lab Setup

Estimated Time: 60 minutes

Before starting this lab, you must complete the lab in Module 2. For the
lab in this module, you will use the available host machine. Also, you
must complete the following steps:

1.  On the host computer, click **Start**, type **Remote**, and then
    click **Remote Desktop Connection**.

2.  In Remote Desktop Connection, provide the name of your virtual
    machine in the **Computer** box by using the following format:

**vm20532[*Your Name Here*].cloudapp.net:[*Your VM RDP Port*]**

> ![](media/image1.wmf) **Note:** The name and port for your virtual
> machine might be saved in the Computer drop-down list. If this is the
> case, use this value instead of typing it in manually. If you are
> unsure about your virtual machine’s RDP port, use either of the Azure
> portals to find your virtual machine’s endpoints. The endpoint with
> the name **Remote Desktop** is the correct port for RDP. This port is
> randomized to protect your virtual machine from unauthorized access.

1.  In Remote Desktop Connection, click **Connect**. Wait until the RDP
    client accesses the virtual machine.

2.  If necessary, sign in by using the following credentials:

> User name: **Student**
>
> Password: **AzurePa\$\$w0rd**

1.  Verify that you received the credentials to sign in to the Azure
    portal from your training provider. You will use these credentials
    and the Azure account throughout the labs in this course.

### Exercise 1: Creating an Azure Website

Scenario

In this exercise, you will:

> Create a Website instance in the Management Portal.
>
> Go to the URL for the new Website.

The main tasks for this exercise are as follows:

1\. Create a Website instance by using the Management Portal.

2\. Go to the newly created Website's placeholder page.

####   Task 1: Create a Website instance by using the Management Portal {#task-1-create-a-website-instance-by-using-the-management-portal .ProcedureHeading}

1.  Sign in to the Management Portal (https://manage.windowsazure.com).

2.  Create a new Custom Website instance by using a unique name and the
    following details:

> ![](media/image1.wmf) **Note:** Be sure to note down your SQL
> administrator user name and password. If you lose the information, it
> will be very difficult and time consuming to recover that information.
>
> Url: **Pick a unique name for the website**
>
> Database: **Free 20 MB SQL Database**
>
> Region: **Select the region that is closest to your location**
>
> DB Connection String Name: **EventsContextConnectionString**
>
> Database Name: **EventsContextDB**
>
> Database Server: **New SQL database server**

####   Task 2: Go to the newly created Website's placeholder page {#task-2-go-to-the-newly-created-websites-placeholder-page .ProcedureHeading}

1.  View the Dashboard for your Website.

2.  Go to your new Website.

**Results**: After completing this exercise, you will have used the
Management Portal to create Website instances.

### Exercise 2: Deploying an ASP.NET Web Application to an Azure Website

Scenario

In this exercise, you will:

> Download the publish profile for an existing Website.
>
> Publish a web application by using the publish wizard in Visual Studio
> 2013.

The main tasks for this exercise are as follows:

1\. Open an existing ASP.NET web application project with Visual Studio
2013.

2\. Download the publish profile for the Azure Website.

3\. Publish the ASP.NET web application to the Azure Website.

4\. Verify that the web application is successfully published.

####   Task 1: Open an existing ASP.NET web application project with Visual Studio 2013 {#task-1-open-an-existing-asp.net-web-application-project-with-visual-studio-2013 .ProcedureHeading}

1.  Open the **Contoso.Events** solution from the following location:

    -   File location: **Allfiles
        (F):\\Mod03\\Labfiles\\Starter\\Contoso.Events**

2.  Debug the web application to verify that it works.

####   Task 2: Download the publish profile for the Azure Website {#task-2-download-the-publish-profile-for-the-azure-website .ProcedureHeading}

1.  Sign in to the Management Portal
    ([*https://manage.windowsazure.com*](https://manage.windowsazure.com)).

2.  Go to your previously created Website’s dashboard.

3.  Download the publish profile for your Website:

    -   Save location: **Allfiles (F):\\Mod03\\Labfiles**

####   Task 3: Publish the ASP.NET web application to the Azure Website {#task-3-publish-the-asp.net-web-application-to-the-azure-website .ProcedureHeading}

> Publish the ASP.NET web application by using the publish profile.

####   Task 4: Verify that the web application is successfully published {#task-4-verify-that-the-web-application-is-successfully-published .ProcedureHeading}

> Verify that the Website is working correctly in Azure.

**Results**: After completing this exercise, you will have used a
publish profile to publish web applications directly to a Website.

### Exercise 3: Configuring an Azure Website

Scenario

In this exercise, you will:

> Use the **ConfigurationManager** class to read custom app settings
> from a web configuration file.
>
> Modify custom app settings by using the Management Portal.

The main tasks for this exercise are as follows:

1\. Implement logic to read a configuration setting from app settings.

2\. Publish web application to the Azure Website.

3\. Modify the app settings in the Management Portal.

4\. Verify that the app settings are successfully updated.

####   Task 1: Implement logic to read a configuration setting from app settings {#task-1-implement-logic-to-read-a-configuration-setting-from-app-settings .ProcedureHeading}

1.  View the **EventsListViewModel** class in the
    **Contoso.Events.ViewModels** project.

2.  Update the **EventsListViewModel** class to use an app setting that
    sets the **EventCount** property in **EventsListViewModel**
    constructor:

    -   App Setting Key: **EventsListViewModel.EventCount**

3.  Add an app setting to the root of the **Web.config** for the
    **Contoso.Events.Management** project:

    -   App Setting Key: **EventsListViewModel.EventCount**

    -   App Setting Value: **5**

4.  Verify that the local web application is now using the app setting.

####   Task 2: Publish web application to the Azure Website {#task-2-publish-web-application-to-the-azure-website .ProcedureHeading}

1.  Publish the ASP.NET web application by using the most recent publish
    profile.

2.  Verify that the cloud-based web application is now using the app
    setting.

####   Task 3: Modify the app settings in the Management Portal {#task-3-modify-the-app-settings-in-the-management-portal .ProcedureHeading}

1.  Sign in to the Management Portal
    ([*https://manage.windowsazure.com*](https://manage.windowsazure.com)).

2.  Go to your previously created Website’s **Configure** tab.

3.  Add an **App Settings** entry to the Website configuration to
    override the app setting in the Web.config file.

    -   App Setting Key: **EventsListViewModel.EventCount**

    -   App Setting Value: **2**

####   Task 4: Verify that the app settings are successfully updated {#task-4-verify-that-the-app-settings-are-successfully-updated .ProcedureHeading}

> Verify that the web application in the cloud is now using the updated
> App Settings entry.

**Results**: After completing this exercise, you will have configured
custom app settings by using a Web.config file and the Management
Portal.

> Verify the correctness of the statement by placing a mark in the
> column to the right.

  Statement                                                                                    Answer
  -------------------------------------------------------------------------------------------- --------
  True or False: WebDeploy is the only mechanism for deploying web applications to Websites.

©2014 Microsoft Corporation. All rights reserved.  The text in this
document is available under the [Creative Commons Attribution 3.0
License](https://creativecommons.org/licenses/by/3.0/legalcode),
additional terms may apply.  All other content contained in this
document (including, without limitation, trademarks, logos, images,
etc.) are ***not*** included within the Creative Commons license grant. 
This document does not provide you with any legal rights to any
intellectual property in any Microsoft product. You may copy and use
this document for your internal, reference purposes. 

This document is provided "as-is." Information and views expressed in
this document, including URL and other Internet Web site references, may
change without notice. You bear the risk of using it. Some examples are
for illustration only and are fictitious. No real association is
intended or inferred. Microsoft makes no warranties, express or implied,
with respect to the information provided here. 
